-- --------------------------------------- Creaci√≥n de la base de datos --------------------------------------------
-- -----------------------------------------------------------------------------------------------------------------
-- -------------------------------------------- Tabla Motivos ------------------------------------------------------

CREATE TABLE `motivos` (
  `id_motivo` int NOT NULL auto_increment,
  `descripcion` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id_motivo`)
);
DROP TABLE motivos;
SELECT * FROM motivos;

-- -----------------------------------------------------------------------------------------------------------------
-- -------------------------------------------- Tabla Bodegas ------------------------------------------------------

CREATE TABLE `bodegas` (
  `id_bodega` int NOT NULL auto_increment,
  `descripcion` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id_bodega`)
);
DROP TABLE bodegas;
SELECT * FROM bodegas;

-- -----------------------------------------------------------------------------------------------------------------
-- -------------------------------------------- Tabla Productos ----------------------------------------------------

CREATE TABLE `productos` (
  `id_producto` int NOT NULL auto_increment,
  `descripcion` varchar(45) DEFAULT NULL,
  `valor_venta` double DEFAULT NULL,
  PRIMARY KEY (`id_producto`)
);
DROP TABLE productos;
SELECT * FROM productos;

-- -----------------------------------------------------------------------------------------------------------------
-- -------------------------------------------- Tabla Ubicaciones --------------------------------------------------

CREATE TABLE `ubicaciones` (
  `id_ubicacion` int NOT NULL auto_increment,
  `posicion` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id_ubicacion`)
);
DROP TABLE ubicaciones;
SELECT * FROM ubicaciones;

-- -----------------------------------------------------------------------------------------------------------------
-- -------------------------------------------- Tabla Usuarios -----------------------------------------------------

CREATE TABLE `usuarios` (
  `id_usuario` int NOT NULL auto_increment,
  `cedula` int NOT NULL unique,
  `contrasenia` varchar(50) DEFAULT NULL,
  `rol` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id_usuario`)
);
DROP TABLE usuarios;
SELECT * FROM usuarios;

-- -----------------------------------------------------------------------------------------------------------------
-- -------------------------------------------- Tabla Ventas -----------------------------------------------------

CREATE TABLE `ventas` (
  `id_venta` int NOT NULL auto_increment,
  `fecha` date DEFAULT NULL,
  `cantidad` int DEFAULT NULL,
  `valor_total` double DEFAULT NULL,
  `id_producto` int NOT NULL,
  PRIMARY KEY (`id_venta`),
  CONSTRAINT `fk_id_producto_ventas` FOREIGN KEY (`id_producto`) REFERENCES `productos` (`id_producto`)
);
DROP TABLE ventas;
SELECT * FROM ventas;

-- -----------------------------------------------------------------------------------------------------------------
-- -------------------------------------------- Tabla Ingresos_Bodega ---------------------------------------------- 
CREATE TABLE `ingresos_bodega` (
  `id_ingreso_bodega` int NOT NULL auto_increment,
  `factura` varchar(20) DEFAULT NULL,
  `observaciones` varchar(200) DEFAULT NULL,
  `fecha` date DEFAULT NULL,
  `id_producto` int NOT NULL,
  `cantidad` int DEFAULT NULL,
  `valor_unitario` double DEFAULT NULL,
  `id_ubicacion` int DEFAULT NULL,
  PRIMARY KEY (`id_ingreso_bodega`),
  CONSTRAINT `fk_id_producto_compras` FOREIGN KEY (`id_producto`) REFERENCES `productos` (`id_producto`),
  CONSTRAINT `fk_id_ubicacion_compras` FOREIGN KEY (`id_ubicacion`) REFERENCES `ubicaciones` (`id_ubicacion`)
);
DROP TABLE ingresos_bodega;
SELECT * FROM ingresos_bodega;

-- -----------------------------------------------------------------------------------------------------------------
-- -------------------------------------------- Tabla Ingresos_Tienda ---------------------------------------------- 
CREATE TABLE `ingresos_tienda` (
  `id_ingreso_tienda` int NOT NULL auto_increment,
  `fecha` date DEFAULT NULL,
  `id_producto` int NOT NULL,
  `cantidad` int DEFAULT NULL,
  `id_ubicacion` int DEFAULT NULL,
  PRIMARY KEY (`id_ingreso_tienda`),
  CONSTRAINT `fk_id_producto_tienda` FOREIGN KEY (`id_producto`) REFERENCES `productos` (`id_producto`),
  CONSTRAINT `fk_id_ubicacion_tienda` FOREIGN KEY (`id_ubicacion`) REFERENCES `ubicaciones` (`id_ubicacion`)
);
DROP TABLE ingresos_tienda;
SELECT * FROM ingresos_tienda;	

-- -----------------------------------------------------------------------------------------------------------------
-- -------------------------------------------- Tabla Traslados ---------------------------------------------------- 

CREATE TABLE `traslados` (
  `id_traslado` int NOT NULL auto_increment,
  `fecha` date DEFAULT NULL,
  `origen` int NOT NULL,
  `destino` int DEFAULT NULL,
  `id_producto` int DEFAULT NULL,
  `cantidad` int DEFAULT NULL,
  `observaciones` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`id_traslado`),
  CONSTRAINT `fk_id_producto_traslado` FOREIGN KEY (`id_producto`) REFERENCES `productos` (`id_producto`)
);
DROP TABLE traslados;
SELECT * FROM traslados;

-- -----------------------------------------------------------------------------------------------------------------
-- -------------------------------------------- Tabla Ajustes Inventario -------------------------------------------- 

CREATE TABLE `ajustes_inventario` (
  `id_ajuste_inventario` int NOT NULL auto_increment,
  `id_producto` int DEFAULT NULL,
  `fecha` date DEFAULT NULL,
  `id_bodega` int NOT NULL,
  `id_motivo` int DEFAULT NULL,
  `cantidad` int DEFAULT NULL,
  `observaciones` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`id_ajuste_inventario`),
  CONSTRAINT `fk_id_producto_ajuste` FOREIGN KEY (`id_producto`) REFERENCES `productos` (`id_producto`),
  CONSTRAINT `fk_bodega_ajuste` FOREIGN KEY (`id_bodega`) REFERENCES `bodegas` (`id_bodega`),
  CONSTRAINT `fk_motivo_ajuste` FOREIGN KEY (`id_motivo`) REFERENCES `motivos` (`id_motivo`)
);
DROP TABLE traslados;
SELECT * FROM traslados;

